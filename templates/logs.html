{% extends 'base.html' %}
{% block content %}
<div class="hero p-3 rounded-4 mb-3">
  <div class="d-flex justify-content-between align-items-center">
    <div>
      <p class="text-secondary mb-1">Sensör Logları</p>
      <h2 class="mb-0">Kayıtlı Ölçümler</h2>
    </div>
    <div class="text-end">
      <small class="text-secondary" id="sensorLogUpdated">--</small>
    </div>
  </div>
</div>

<div class="card mb-3"><div class="card-body">
  <h6 class="mb-1">Bu sayfa ne işe yarar?</h6>
  <div class="small text-secondary">
    Sensör ölçümlerini zaman aralığıyla listeler, CSV indirir. “Log temizle” sadece SQLite kayıtlarını siler; CSV dosyaları kalır.
    Detay: <a href="/help#hLoglar">Yardım/SSS</a>.
  </div>
</div></div>

<div class="card mb-3"><div class="card-body">
  <div class="d-flex flex-column flex-lg-row gap-2 justify-content-between align-items-start align-items-lg-end">
    <div class="d-flex flex-wrap gap-2 align-items-end">
      <div>
        <label class="form-label small text-secondary mb-1">Başlangıç</label>
        <input class="form-control form-control-sm" id="sensorLogFrom" placeholder="ISO veya unix sn">
      </div>
      <div>
        <label class="form-label small text-secondary mb-1">Bitiş</label>
        <input class="form-control form-control-sm" id="sensorLogTo" placeholder="ISO veya unix sn">
      </div>
      <div>
        <label class="form-label small text-secondary mb-1">Limit</label>
        <input class="form-control form-control-sm" id="sensorLogLimit" type="number" min="1" max="2000" value="200">
      </div>
      <div>
        <label class="form-label small text-secondary mb-1">Sıra</label>
        <select class="form-select form-select-sm" id="sensorLogOrder">
          <option value="desc" selected>Yeni → Eski</option>
          <option value="asc">Eski → Yeni</option>
        </select>
      </div>
      <button class="btn btn-outline-secondary btn-sm" id="sensorLogRefresh" type="button">Yenile</button>
      <a class="btn btn-outline-secondary btn-sm" id="sensorLogDownload" href="#" download>CSV indir</a>
    </div>
    <div class="d-flex flex-wrap gap-2 align-items-center">
      <button class="btn btn-outline-danger btn-sm" id="sensorLogClear" type="button">Log temizle</button>
      <small class="text-secondary" id="sensorLogNote"></small>
    </div>
  </div>
</div></div>

<div class="card"><div class="card-body">
  <div class="table-responsive">
    <table class="table table-sm align-middle" id="sensorLogTable">
      <thead>
        <tr>
          <th>Ts</th>
          <th>DHT °C</th>
          <th>DHT %</th>
          <th>DS18 °C</th>
          <th>Lux</th>
          <th>Soil 0</th>
          <th>Soil 1</th>
          <th>Soil 2</th>
          <th>Soil 3</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>
  <div id="sensorLogEmpty" class="small text-secondary d-none">Veri yok</div>
</div></div>

<script>window.initLogs && window.initLogs();</script>
{% endblock %}
